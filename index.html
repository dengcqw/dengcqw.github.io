<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"dengcqw.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.12.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="我也有个写作的梦想，还有大把时间，努力实现吧。I also have a dream about writing. A mount of time in the feature, it&#39;s never too late.">
<meta property="og:type" content="website">
<meta property="og:title" content="Deng&#39;s Technique Blogs">
<meta property="og:url" content="https://dengcqw.github.io/index.html">
<meta property="og:site_name" content="Deng&#39;s Technique Blogs">
<meta property="og:description" content="我也有个写作的梦想，还有大把时间，努力实现吧。I also have a dream about writing. A mount of time in the feature, it&#39;s never too late.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="DengJinlong">
<meta property="article:tag" content="计算机">
<meta property="article:tag" content="computer">
<meta property="article:tag" content="思考">
<meta property="article:tag" content="thinking">
<meta property="article:tag" content="移动互联网">
<meta property="article:tag" content="mobile internet">
<meta property="article:tag" content="软件">
<meta property="article:tag" content="Software">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://dengcqw.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Deng's Technique Blogs</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Deng's Technique Blogs</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">邓小宝的技术博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">DengJinlong</p>
  <div class="site-description" itemprop="description">我也有个写作的梦想，还有大把时间，努力实现吧。I also have a dream about writing. A mount of time in the feature, it's never too late.</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">29</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dengcqw.github.io/2022/08/12/work-daily-220812/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DengJinlong">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deng's Technique Blogs">
      <meta itemprop="description" content="我也有个写作的梦想，还有大把时间，努力实现吧。I also have a dream about writing. A mount of time in the feature, it's never too late.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Deng's Technique Blogs">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/08/12/work-daily-220812/" class="post-title-link" itemprop="url">work-daily-220812</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-08-12 09:45:45" itemprop="dateCreated datePublished" datetime="2022-08-12T09:45:45+08:00">2022-08-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-14 18:18:12" itemprop="dateModified" datetime="2022-08-14T18:18:12+08:00">2022-08-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/work/" itemprop="url" rel="index"><span itemprop="name">工作日记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="技术踩坑"><a href="#技术踩坑" class="headerlink" title="技术踩坑"></a>技术踩坑</h3><h3 id="不懂就问"><a href="#不懂就问" class="headerlink" title="不懂就问"></a>不懂就问</h3><p>安卓编译后apk存放在哪？</p>
<blockquote>
<p>“build&#x2F;outputs&#x2F;apk&#x2F;DEV&#x2F;debug&#x2F;xxx.apk”</p>
</blockquote>
<p>深入详解Apk编译打包流程 <a target="_blank" rel="noopener" href="https://juejin.cn/post/7021814352067952671">-&gt;</a></p>
<p>android加快编译速度<br><img src="/imgs/android-studio_gradle-offline-mode.webp" alt="webp"></p>
<p>RN拆包解决方案 <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904053365800967">-&gt;</a></p>
<h3 id="想啥写啥"><a href="#想啥写啥" class="headerlink" title="想啥写啥"></a>想啥写啥</h3><p>我一心想把事情做好，考虑太多，反而做不好。</p>
<p>在小公司任职，什么都要懂的原因：</p>
<ul>
<li>没有完善的工具，什么都要动手干，我们h5同事要会客户端打包</li>
<li>没有完善的流程，不懂上下游的事情会很被动，遇到猪队友要防被丟锅</li>
<li>bug没有管理平台，没有优先级，一堆优化需求当bug</li>
<li>公司管理混乱</li>
</ul>
<p>上午去听个公司内部的终端控制的平台发布会，它提供客户端App的基础能力。还包括广告。<br>不知道什么团队开发的。我还以为没有这样的团队。<br>领导之前开发了一个内部应用分发平台。但这控制塔平台应该主要用于线上功能。<br>公司到底有多少个app(几十个)，几个研发团队？<br>国家很多，每个国家APP还不同。功能不同，代码也不统一。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dengcqw.github.io/2022/08/11/work-daily-220811/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DengJinlong">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deng's Technique Blogs">
      <meta itemprop="description" content="我也有个写作的梦想，还有大把时间，努力实现吧。I also have a dream about writing. A mount of time in the feature, it's never too late.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Deng's Technique Blogs">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/08/11/work-daily-220811/" class="post-title-link" itemprop="url">work-daily-220811</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-08-11 09:24:59" itemprop="dateCreated datePublished" datetime="2022-08-11T09:24:59+08:00">2022-08-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-14 18:18:12" itemprop="dateModified" datetime="2022-08-14T18:18:12+08:00">2022-08-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/work/" itemprop="url" rel="index"><span itemprop="name">工作日记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="技术踩坑"><a href="#技术踩坑" class="headerlink" title="技术踩坑"></a>技术踩坑</h3><p>await 可能不返回吗？ false一定会执行到吗? 是否需要trycatch or .catch(error &#x3D;&gt; console.log(error))？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setLoading(true)</span><br><span class="line">await dispatch(requests(true))</span><br><span class="line">setLoading(false)</span><br></pre></td></tr></table></figure>

<h3 id="不懂就问"><a href="#不懂就问" class="headerlink" title="不懂就问"></a>不懂就问</h3><p>监听react navigation 页面展示的方法 <a target="_blank" rel="noopener" href="https://stackoverflow.com/a/61975683">-&gt;</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const isFocused = useIsFocused();</span><br><span class="line">React.useEffect(() =&gt; &#123;</span><br><span class="line">if (isFocused) &#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;, [isFocused])</span><br></pre></td></tr></table></figure>

<h3 id="想啥写啥"><a href="#想啥写啥" class="headerlink" title="想啥写啥"></a>想啥写啥</h3><p>今天的iOS包，启动崩溃了，我试了正常。我叫他们拿崩溃日志给我看。我还教他们怎么取崩溃日志。<br>崩溃在flutter。原来是webview组件参数传错了，但是反馈给同事，也找不出原因。猜测是H5传的，让找H5同事。<br>但是H5同事懂flutter吗？我直接把代码回退了。只测试我自己的功能先吧。</p>
<p>token 几个小时就失效了。那同事也不知道问问其他人。看来在小公司，真的什么都要懂。<br>真正的bug是自己退出登录后，mmkv 没有同步数据。但测试反馈的是用着用着就token失效了。</p>
<p>今天晨会被领导提醒，每天都要尽早发包。不能到第二天。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dengcqw.github.io/2022/08/10/work-daily-220810/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DengJinlong">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deng's Technique Blogs">
      <meta itemprop="description" content="我也有个写作的梦想，还有大把时间，努力实现吧。I also have a dream about writing. A mount of time in the feature, it's never too late.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Deng's Technique Blogs">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/08/10/work-daily-220810/" class="post-title-link" itemprop="url">work-daily-220810</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-08-10 10:30:46" itemprop="dateCreated datePublished" datetime="2022-08-10T10:30:46+08:00">2022-08-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-14 18:18:12" itemprop="dateModified" datetime="2022-08-14T18:18:12+08:00">2022-08-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/work/" itemprop="url" rel="index"><span itemprop="name">工作日记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="技术踩坑"><a href="#技术踩坑" class="headerlink" title="技术踩坑"></a>技术踩坑</h3><p>自定义 react navigation header</p>
<blockquote>
<p>screenOptions 里有 header 属性，但是文档里却找不到 <a target="_blank" rel="noopener" href="https://stackoverflow.com/a/72135204">-&gt;</a></p>
</blockquote>
<h3 id="不懂就问"><a href="#不懂就问" class="headerlink" title="不懂就问"></a>不懂就问</h3><p>如何获取activity context</p>
<blockquote>
<p>java 的 activity 使用this表示context</p>
</blockquote>
<p>lodash vs rxjs <a target="_blank" rel="noopener" href="https://stackoverflow.com/a/53980878">-&gt;</a></p>
<blockquote>
<p>Lodash makes JavaScript easier by taking the hassle out of working with arrays, numbers, objects, strings, etc.<br>RxJS is a library for reactive programming using Observables, to make it easier to compose asynchronous or callback-based code.</p>
</blockquote>
<p>RN 中使用vector icon</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  &lt;View style=&#123;&#123;</span><br><span class="line">    paddingVertical: 15,</span><br><span class="line">    paddingHorizontal: 10,</span><br><span class="line">    flexDirection: &quot;row&quot;,</span><br><span class="line">    justifyContent: &quot;space-between&quot;,</span><br><span class="line">    alignItems: &quot;baseline&quot;</span><br><span class="line">&#125;&#125;&gt;</span><br><span class="line">    &lt;Text style=&#123;&#123;fontSize: 16, color: &quot;black&quot;&#125;&#125;&gt;Kategorien:&lt;/Text&gt;</span><br><span class="line">    &lt;Icon/&gt;</span><br><span class="line">&lt;/View&gt;</span><br></pre></td></tr></table></figure>

<p><Text> 自定义字体</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/874737221a73">https://www.jianshu.com/p/874737221a73</a><br><a target="_blank" rel="noopener" href="https://todoit.tech/custom-font.html">https://todoit.tech/custom-font.html</a></p>
</blockquote>
<h3 id="想啥写啥"><a href="#想啥写啥" class="headerlink" title="想啥写啥"></a>想啥写啥</h3><p>需要用<a target="_blank" rel="noopener" href="https://pushy.reactnative.cn/docs/publish.html">pushy</a>这个服务做热更新。我始终认为有很多基础工作要做，不是一接入就成功了。坑一定很多。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dengcqw.github.io/2022/08/09/work-daily-220809/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DengJinlong">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deng's Technique Blogs">
      <meta itemprop="description" content="我也有个写作的梦想，还有大把时间，努力实现吧。I also have a dream about writing. A mount of time in the feature, it's never too late.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Deng's Technique Blogs">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/08/09/work-daily-220809/" class="post-title-link" itemprop="url">work-daily-220809</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-08-09 09:12:07" itemprop="dateCreated datePublished" datetime="2022-08-09T09:12:07+08:00">2022-08-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-14 18:18:12" itemprop="dateModified" datetime="2022-08-14T18:18:12+08:00">2022-08-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/work/" itemprop="url" rel="index"><span itemprop="name">工作日记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="技术踩坑"><a href="#技术踩坑" class="headerlink" title="技术踩坑"></a>技术踩坑</h3><h4 id="安卓编译的各种问题"><a href="#安卓编译的各种问题" class="headerlink" title="安卓编译的各种问题"></a>安卓编译的各种问题</h4><ol>
<li><p>NDK下载很慢<br>一直在下载某个NDK版本，即不是最新的，也不是也是我项目中用到的。</p>
</li>
<li><p>react-native-mmkv 直接内置了mmkv cpp代码(重新编译正常)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.../jtreact/node_modules/react-native-mmkv/android/CMakeLists.txt : C/C++ debug|x86 : CMake Error: The following variables are used in this project, but they are set to NOTFOUND.</span><br><span class="line">Please set them or make sure they are set and tested correctly in the CMake files:</span><br><span class="line">JSI_LIB</span><br><span class="line">    linked by target &quot;reactnativemmkv&quot; in directory .../jtreact/node_modules/react-native-mmkv/android</span><br><span class="line">REACT_NATIVE_JNI_LIB</span><br><span class="line">    linked by target &quot;reactnativemmkv&quot; in directory .../jtreact/node_modules/react-native-mmkv/android</span><br><span class="line">.../jtreact/node_modules/react-native-mmkv/android/CMakeLists.txt : C/C++ debug|x86 : Configuration failed.</span><br><span class="line">executing external native build for cmake .../jtreact/node_modules/react-native-mmkv/android/CMakeLists.txt</span><br></pre></td></tr></table></figure></li>
<li><p>dex 错误 (重新编译正常)<br><font color='red'> Execution failed for task ‘:workspace:apps:JTCenter:mergeProjectDexDEVDebug’. </font><br>rn-fetch-blob 使用了okio导致的</p>
</li>
<li><p>出现重复dex缓存(clear，重新编译)<br><font color='red'> build error: Type androidx.webkit.ServiceWorkerClientCompat is defined multiple times</font></p>
</li>
<li><p>崩溃 没有找到 jsc <a target="_blank" rel="noopener" href="https://github.com/facebook/react-native/issues/25537">-&gt;</a><br>因为多了括号吗? 真是<br><img src="/imgs/rn_android_maven_url_error.webp" alt="webp"></p>
</li>
</ol>
<h3 id="不懂就问"><a href="#不懂就问" class="headerlink" title="不懂就问"></a>不懂就问</h3><p>拷贝ReactNative项目出现问题</p>
<blockquote>
<p><font color='red'> Cannot find module ‘.&#x2F;tools&#x2F;gracefulifyFs’ </font><br>删node_modules，重新安装</p>
</blockquote>
<p>ReactNativeHost 是必须的吗？ 怎么用？</p>
<blockquote>
<p>做用类似RCTbridge</p>
</blockquote>
<p>android 只安装运行，不build?</p>
<blockquote>
<p>adb install apk<br>用http-server，让手机下载安装</p>
</blockquote>
<p>React Native安卓设置调试ip地址 <a target="_blank" rel="noopener" href="https://stackoverflow.com/a/40347636">-&gt;</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SharedPreferences preferences =</span><br><span class="line">    PreferenceManager.getDefaultSharedPreferences(getApplicationContext());</span><br><span class="line">    preferences.edit().putString(&quot;debug_http_host&quot;, &quot;localhost:8082&quot;).apply();</span><br></pre></td></tr></table></figure>
<p>React Native安卓调试链接错误</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://192.168.2.12:8081/index.android.bundle?platform=android">http://192.168.2.12:8081/index.android.bundle?platform=android</a><br>创建 ReactNativeHost 时 重写下面方法返回’index’; 官方demo也是这样处理的</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">protected String getJSMainModuleName() &#123;</span><br><span class="line">  //return &quot;index.android&quot;;</span><br><span class="line">  return &quot;index&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>react-native-rodney-broadcast的问题</p>
<blockquote>
<p>参数不能为undefined，需要有个值, android 和 iOS 参数个不一样。<br><font color='red'>sendBroadcast got 5 arguments, expected 6</font><br>拷贝一份代码出来，删除多余参数<br>安卓不支持静态广播，可以动态广播，也可以改成使用Eventbus</p>
</blockquote>
<p>下面两个create方法使用方式不同</p>
<blockquote>
<p>protected void onCreate(Bundle state){  第一次启动调用<br>public void onCreate(@Nullable Bundle savedInstanceState, @Nullable PersistableBundle persistentState) ?</p>
</blockquote>
<h3 id="想啥写啥"><a href="#想啥写啥" class="headerlink" title="想啥写啥"></a>想啥写啥</h3><p>android 每次build都有不同的错误。这是天灾还是是人祸？</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dengcqw.github.io/2022/08/08/work-daily-220808/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DengJinlong">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deng's Technique Blogs">
      <meta itemprop="description" content="我也有个写作的梦想，还有大把时间，努力实现吧。I also have a dream about writing. A mount of time in the feature, it's never too late.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Deng's Technique Blogs">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/08/08/work-daily-220808/" class="post-title-link" itemprop="url">work-daily-220808</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-08-08 14:01:32" itemprop="dateCreated datePublished" datetime="2022-08-08T14:01:32+08:00">2022-08-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-14 18:18:12" itemprop="dateModified" datetime="2022-08-14T18:18:12+08:00">2022-08-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/work/" itemprop="url" rel="index"><span itemprop="name">工作日记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="技术踩坑"><a href="#技术踩坑" class="headerlink" title="技术踩坑"></a>技术踩坑</h3><h4 id="使用-rn-fetch-blob-遇到的问题"><a href="#使用-rn-fetch-blob-遇到的问题" class="headerlink" title="使用 rn-fetch-blob 遇到的问题"></a>使用 rn-fetch-blob 遇到的问题</h4><p>UIImagePickerController 进行相机交互后出现UI冻结&#x2F;App假死状态，需要使用overFullScreen <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/8140a896b616">-&gt;</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let picker = UIImagePickerController()</span><br><span class="line">picker.modalPresentationStyle = .overFullScreen &lt;- 这里</span><br><span class="line">self?.navigationController?.present(picker, animated: true, completion: nil)</span><br></pre></td></tr></table></figure>
<p>iOS 14新的api(PHPickerViewController)没有类似问题。</p>
<p>从相册选择文件的路径是 <font color='red'>file:&#x2F;&#x2F;&#x2F;(…略)&#x2F;tmp&#x2F;D67DA8F7-963A-4B68-9B08-71E8EDE2140B.png </font><br>我记得这个叫-[NSURL filePathURL]。无法使用NSFileManager 处理，要出去掉前缀file:&#x2F;&#x2F;。</p>
<h4 id="Android-集成ReactNative"><a href="#Android-集成ReactNative" class="headerlink" title="Android 集成ReactNative"></a>Android 集成ReactNative</h4><p>还没开始编译就失败了<br><font color='red'>Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed: </font><br><font color='red'>node_modules&#x2F;@react-native-community&#x2F;cli-platform-android&#x2F;native_modules.gradle’ line: 313</font><br>我新建一个react native 工程，对比了两个文件，发现我的文件被我修改了。因为我不小心删了安卓工程里variables<br><img src="/imgs/rn_android_native_modules_changed.webp" alt="webp"></p>
<p>这两个variables 哪里来的也还不清楚。我对安卓不熟悉。<br><img src="/imgs/rn_android_app_variable_setting.webp" alt="webp"><br>那么Project Structure 的 Variables修改没有存git？为什么。</p>
<p><img src="/imgs/rn_android_config_empty.webp" alt="webp"><br>这个命令没找到的问题。在集成iOS时遇到过，是react native config 命令，可以列出安装第三方库的iOS和android工程。打开native_modules.gradle找到执行位置，然后打印路径才发现是路径不对。我直接把官方模块放在我们安卓项目下，原脚本是用在官方模板里，需要修改命令路径。我把gradle拷贝出来，修改路径，后配置到安卓工程里。竟然也是可以了。（知道后感觉很容易，查这个问题时都快抑郁了）<br>修改如下：def cliPath &#x3D; this.getCommandOutput(nodeCommand, new File(this.root, “jtreact”))<br>看了从源码深入探究react-native 0.60 的autolink过程<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904177068408846">-&gt;</a>，其中目录结构很关键。</p>
<p><font color='red'>com.facebook.react.PackageList cannot resolve or not linked</font> <a target="_blank" rel="noopener" href="https://github.com/MohGovIL/hamagen-react-native/issues/178">-&gt;</a></p>
<blockquote>
<p>React Native 自动寻找build.gradle文件对应目录下的build目录。<br>把applyNativeModulesAppBuildGradle方法放到项目下build.gradle里执行。</p>
</blockquote>
<h3 id="不懂就问"><a href="#不懂就问" class="headerlink" title="不懂就问"></a>不懂就问</h3><p>在android当前工程里新建module</p>
<blockquote>
<p>新建一个module 但是没有工程列表里，其实是新建了一个目录和gradle文件<br>可以单独打开这个module项目，或者要添加依赖到现有项目</p>
</blockquote>
<p>Android安装APP失败: INSTALL_FAILED_TEST_ONLY <a target="_blank" rel="noopener" href="https://blog.csdn.net/aikongmeng/article/details/102589809">-&gt;</a></p>
<p>gradle 是什么，不同版本之前是什么关系？</p>
<p>为什么项目会下载一个没有用到的ndk版本呢？</p>
<h3 id="想啥写啥"><a href="#想啥写啥" class="headerlink" title="想啥写啥"></a>想啥写啥</h3><p>和一个二傻子调试接口。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dengcqw.github.io/2022/08/05/work-daily-220805/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DengJinlong">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deng's Technique Blogs">
      <meta itemprop="description" content="我也有个写作的梦想，还有大把时间，努力实现吧。I also have a dream about writing. A mount of time in the feature, it's never too late.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Deng's Technique Blogs">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/08/05/work-daily-220805/" class="post-title-link" itemprop="url">work-daily-220805</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-08-05 12:35:21" itemprop="dateCreated datePublished" datetime="2022-08-05T12:35:21+08:00">2022-08-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-14 18:18:12" itemprop="dateModified" datetime="2022-08-14T18:18:12+08:00">2022-08-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/work/" itemprop="url" rel="index"><span itemprop="name">工作日记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="技术踩坑"><a href="#技术踩坑" class="headerlink" title="技术踩坑"></a>技术踩坑</h3><h4 id="React-Navigation-错误提示"><a href="#React-Navigation-错误提示" class="headerlink" title="React Navigation 错误提示"></a>React Navigation 错误提示</h4><font color='red'>
ERROR  Warning: Cannot update a component (`NativeStackNavigator`) while rendering a different component (`EditScreen`). To locate the bad setState() call inside `EditScreen`, follow the stack trace as described in https://reactjs.org/link/setstate-in-render
</font>

<h4 id="React-Navigation-配置导航栏"><a href="#React-Navigation-配置导航栏" class="headerlink" title="React Navigation 配置导航栏"></a>React Navigation 配置导航栏</h4><ul>
<li><p>下面方法不能放在函数组件里，会导致页面闪一下，需要放在React.useLayoutEffect里。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">navigation.setOptions(&#123;</span><br><span class="line">  headerRight: () =&gt; &lt;RightButton onPress=&#123;()=&gt;setEditable(true)&#125;/&gt;,</span><br><span class="line">  headerTitle: Strings.RequirementsEdit,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过screen options配置，可以从route.params获取需要参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Stack.Screen</span><br><span class="line">  name=&quot;Profile&quot;</span><br><span class="line">  component=&#123;ProfileScreen&#125;</span><br><span class="line">  options=&#123;(&#123; route, navigation &#125;) =&gt; (&#123;</span><br><span class="line">    title: Strings.RequirementsEdit,</span><br><span class="line">    headerRight: () =&gt; &lt;RightButton onPress=&#123;()=&gt;setEditable(true)&#125;/&gt;,</span><br><span class="line">  &#125;)&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="react-navigation-x2F-material-top-tabs-页面配置bug"><a href="#react-navigation-x2F-material-top-tabs-页面配置bug" class="headerlink" title="@react-navigation&#x2F;material-top-tabs 页面配置bug"></a>@react-navigation&#x2F;material-top-tabs 页面配置bug</h4><p>使用下面配置screen，每次切换页面时会重新创建页面，导致页面闪一下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Tab.Navigator screenOptions=&#123;screenOptions&#125;&gt;</span><br><span class="line">  &lt;Stack.Screen name=&quot;Profile&quot; component=&#123;List&#125;/&gt;</span><br><span class="line">&lt;/Tab.Navigator&gt;</span><br><span class="line"></span><br><span class="line">// 需要改成jsx方式</span><br><span class="line">&lt;Tab.Screen name=&quot;rejected&quot;&gt;</span><br><span class="line">  &#123;(props) =&gt; &lt;List &#123;...props&#125;/&gt;&#125;</span><br><span class="line">&lt;/Tab.Screen&gt;</span><br></pre></td></tr></table></figure>

<h4 id="React-Native-安卓运行失败"><a href="#React-Native-安卓运行失败" class="headerlink" title="React Native 安卓运行失败"></a>React Native 安卓运行失败</h4><p>在官方工程里允许安卓，出现奇怪问题，之前成功运行过的。<br>运行命令：npx react-native run-anroid<br>出现失败原因：</p>
<ol>
<li>error: cannot find symbol ReactNativeConfig.DEFAULT_CONFIG<br>项目还不支持new arch，所以把相关初始化代码删除了，就可以编译了</li>
<li>mmkv组件编译不过  因为google库下载失败了，网络问题<blockquote>
<p>Task :react-native-mmkv:downloadDoubleConversion FAILED<br>Task :react-native-mmkv:downloadGlog FAILED<br>Task :react-native-mmkv:downloadFolly FAILED</p>
</blockquote>
</li>
</ol>
<h3 id="不懂就问"><a href="#不懂就问" class="headerlink" title="不懂就问"></a>不懂就问</h3><h4 id="redux-默认没添加log？"><a href="#redux-默认没添加log？" class="headerlink" title="redux 默认没添加log？"></a>redux 默认没添加log？</h4><p>需要安装<a target="_blank" rel="noopener" href="https://github.com/LogRocket/redux-logger">redux-logger</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">export const store = configureStore(&#123;</span><br><span class="line">  reducer: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  middleware: (getDefaultMiddleware) =&gt; &#123;</span><br><span class="line">    let defaultM = getDefaultMiddleware()</span><br><span class="line">    if (process.env.NODE_ENV === `development`) &#123;</span><br><span class="line">      const &#123;logger&#125; = require(`redux-logger`)</span><br><span class="line">      return [...defaultM, logger]</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      return defaultM</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>其他文档<br><a target="_blank" rel="noopener" href="https://redux.js.org/understanding/history-and-design/middleware#problem-logging">Logging Middleware</a><br><a target="_blank" rel="noopener" href="https://github.com/lucasconstantino/react-inspect-props">react-inspect-props</a><br><a target="_blank" rel="noopener" href="https://github.com/reduxjs/redux-devtools/blob/main/extension/docs/Integrations.md#react">redux-devtools</a></p>
<h4 id="js-比较boolean的疑惑"><a href="#js-比较boolean的疑惑" class="headerlink" title="js 比较boolean的疑惑"></a>js 比较boolean的疑惑</h4><p>下面写法对吗？状态一直不对<br>const [editable, setEditable] &#x3D; React.useState<boolean>(props.editable?true:false)<br>if (editable){}  和 editable?: 的写法只判断null&#x2F;undefined对象。不判断boolean，boolean对象也是对象。需要直接比较true&#x2F;false。</p>
<h3 id="想啥写啥"><a href="#想啥写啥" class="headerlink" title="想啥写啥"></a>想啥写啥</h3><p>58某个RN开发的同事，水平可以的 他的<a target="_blank" rel="noopener" href="https://handsomeliuyang.github.io/">blog</a></p>
<p>RN需要上传图片，我看了一下原生代码，有多个上传地址，我瞬间明白，后台也有多套代码。<br>感觉这样公司招多少人也不够用啊。各做各的，后期维护也是相当困难的。<br>我感觉自己被感动，是不是及时完成需求就可以，至于其他都不重要了呢。<br>代码越看越把我整不会了</p>
<p>今天培训会上，讲师显示了一个ppt，显示公司年龄和学历的。一半的专科，十分之一不到的研究生。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dengcqw.github.io/2022/08/04/work-daily-220804/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DengJinlong">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deng's Technique Blogs">
      <meta itemprop="description" content="我也有个写作的梦想，还有大把时间，努力实现吧。I also have a dream about writing. A mount of time in the feature, it's never too late.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Deng's Technique Blogs">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/08/04/work-daily-220804/" class="post-title-link" itemprop="url">work-daily-220804</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-08-04 09:10:40" itemprop="dateCreated datePublished" datetime="2022-08-04T09:10:40+08:00">2022-08-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-14 18:18:12" itemprop="dateModified" datetime="2022-08-14T18:18:12+08:00">2022-08-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/work/" itemprop="url" rel="index"><span itemprop="name">工作日记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="技术踩坑"><a href="#技术踩坑" class="headerlink" title="技术踩坑"></a>技术踩坑</h3><h3 id="不懂就问"><a href="#不懂就问" class="headerlink" title="不懂就问"></a>不懂就问</h3><h4 id="js-条件判断"><a href="#js-条件判断" class="headerlink" title="js 条件判断"></a>js 条件判断</h4><p>js 有#if#endif 怎么判断 debug release环境，并选择不同代码<br>需要第三方库支持，语言本身不支持？<br>可以试试下面方法<br>if (process.env.NODE_ENV &#x3D;&#x3D;&#x3D; <code>development</code>) {}</p>
<h4 id="函数式组件使用状态"><a href="#函数式组件使用状态" class="headerlink" title="函数式组件使用状态"></a>函数式组件使用状态</h4><p>函数式组件，怎么保存一个变量? 理论上函数式组件不保存状态的。<br>但可以使用useState hook。只是一个普通的变量怎么保存。</p>
<ul>
<li>函数组件作用域, 组件每次调用时，状态就复原，没有保存状态。</li>
<li>放在文件域？变量一直存在，多个文件会相互影响吗？ 验证了多页面共享</li>
<li>还是要配合redux, state用redux的值初始化。</li>
</ul>
<p>总结: 要保存状态，不管是否影响UI，都要用state保存。<br>需要一个地方存放所有数据，即使组件使用状态，状态初始化也需要数据。所以redux是必须的。</p>
<h4 id="ReactNative-main-queue-warning是什么"><a href="#ReactNative-main-queue-warning是什么" class="headerlink" title="ReactNative main queue warning是什么"></a>ReactNative main queue warning是什么</h4><p><img src="/imgs/rn_main_queue_warning.webp" alt="webp"></p>
<h4 id="React-hook-的调用有特殊要求"><a href="#React-hook-的调用有特殊要求" class="headerlink" title="React hook 的调用有特殊要求"></a>React hook 的调用有特殊要求</h4><p>在组件外调用hook报错? 要在组件内使用，不能在onPress中使用<br><img src="/imgs/rn_invalid_hook_call.webp" alt="webp"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const EditScreen = (props: EditScreenProps) =&gt; &#123;</span><br><span class="line">  const desc = useAppSelector(selectors.selectDesc)</span><br><span class="line">  return &lt;View/&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="redux-异步调用"><a href="#redux-异步调用" class="headerlink" title="redux 异步调用"></a>redux 异步调用</h4><p>使用 createAsyncThunk 函数，再配合 createSlice 里的 extraReducers 使用<br>怎么在createAsyncThunk里怎么使用store和disaptch? <a target="_blank" rel="noopener" href="https://redux-toolkit.js.org/api/createAsyncThunk">-&gt;</a><br>看了很多博客，写得挺好，写得挺多，但几乎都是翻译官方文档和其中的demo。难道这些人都没有实战经验吗？写blog是为刷经验值。<br>还是要靠stackoverflow<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/64793504/cannot-set-getstate-type-to-rootstate-in-createasyncthunk">-&gt;</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// RequirementsList Promiss返回值类型</span><br><span class="line">// ListProps 参数类型</span><br><span class="line">// &#123;state:RootState&#125; store state的类型</span><br><span class="line">const listRequest = createAsyncThunk&lt;RequirementsList, ListProps, &#123;state:RootState&#125;&gt;(&#x27;requirement/RequirementResolveList&#x27;, async (props, thunkAPI) =&gt; &#123;</span><br><span class="line">  let list =  thunkAPI.getState().requirement.resolvedList</span><br><span class="line">  return _listRequest(props.status, list)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 使用</span><br><span class="line">dispatch(listRequest(&#123;&#125; as ListProps))</span><br></pre></td></tr></table></figure>

<h4 id="React函数式组件-Redux特点"><a href="#React函数式组件-Redux特点" class="headerlink" title="React函数式组件+Redux特点"></a>React函数式组件+Redux特点</h4><p>函数式组件，可以理解为render函数。render函数会经常调用，改变一个状态，所有函数组件都会调用一次，然后更新需要更新的页面。那么函数组件里不能做太多的执行，包括变量的定义，回调的定义等，目前这些都放在组件里。<br>这些变量初始化放里面，会反复执行。<br>下面代码是目前写法，是否需要优化呢？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">const List = (status: ListType) =&gt; () =&gt; &#123;</span><br><span class="line">  const dispatch = useAppDispatch()</span><br><span class="line">  const navigation = useNavigation()</span><br><span class="line">  const reqList = useAppSelector(selectors.selectList(status))</span><br><span class="line">  const records = reqList.records || []</span><br><span class="line">  React.useEffect(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;----&gt; List useEffect&#x27;)</span><br><span class="line">    if (records == undefined || records.length == 0) &#123;</span><br><span class="line">      dispatch(requests.listRequest(status))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  const dataProvider = new DataProvider((r1, r2) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;----&gt; item equal&#x27;, r1 !== r2)</span><br><span class="line">    return r1 !== r2</span><br><span class="line">  &#125;).cloneWithRows(records)</span><br><span class="line"></span><br><span class="line">  console.log(&#x27;----&gt; render list&#x27;)</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;RecyclerListView</span><br><span class="line">      layoutProvider=&#123;layoutProvider&#125;</span><br><span class="line">      dataProvider=&#123;dataProvider&#125;</span><br><span class="line">      rowRenderer=&#123;rowRenderer(navigation)&#125;</span><br><span class="line">    /&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="vim-ale-bug"><a href="#vim-ale-bug" class="headerlink" title="vim ale bug"></a>vim ale bug</h4><p>vim ale lint 信息看不全？<br>:ALEDetail 也没法弹出页面<br>待查</p>
<h3 id="想啥写啥"><a href="#想啥写啥" class="headerlink" title="想啥写啥"></a>想啥写啥</h3><p>ReactNative模块目录定义</p>
<ul>
<li>module&#x2F;<ul>
<li>xxxModule&#x2F;  模块主目录<ul>
<li>components&#x2F; 模块自定义组件</li>
<li>models&#x2F;  模块接口模型</li>
<li>index.tsx  模块页面导航定义</li>
<li>xxxScreen.tsx  模块页面实现</li>
<li>Strings.ts  模块使用的字符串</li>
<li>Requests.ts 模块接口请求</li>
<li>Navigation.ts 模块内页面跳转方法</li>
<li>Slice.ts  redux 定义</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>我正好则对一群人，我可以观察他们的工作状态。假装我是老板。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dengcqw.github.io/2022/08/03/work-daily-220803/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DengJinlong">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deng's Technique Blogs">
      <meta itemprop="description" content="我也有个写作的梦想，还有大把时间，努力实现吧。I also have a dream about writing. A mount of time in the feature, it's never too late.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Deng's Technique Blogs">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/08/03/work-daily-220803/" class="post-title-link" itemprop="url">work-daily-220803</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-08-03 09:22:46" itemprop="dateCreated datePublished" datetime="2022-08-03T09:22:46+08:00">2022-08-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-14 18:18:12" itemprop="dateModified" datetime="2022-08-14T18:18:12+08:00">2022-08-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/work/" itemprop="url" rel="index"><span itemprop="name">工作日记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="技术踩坑"><a href="#技术踩坑" class="headerlink" title="技术踩坑"></a>技术踩坑</h3><h4 id="原生代码与ReactNative互相发送事件"><a href="#原生代码与ReactNative互相发送事件" class="headerlink" title="原生代码与ReactNative互相发送事件"></a>原生代码与ReactNative互相发送事件</h4><p>App集成了RN，但是返回原生页面时还是需要原生支持。<br>简单方案就是发个通知。<br>npmjs.com 搜索 notifications, 出来的都是Push Notifications<br>搜索broadcast出来个有用的库： <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/react-native-rodney-broadcast">react-native-rodney-broadcast</a> module config broadcast notification for android and NSNotification for IOS<br>挺完善的库，还有hooks。可以参考来实现自己的功能。<br>使用objc到出方法给RN，再使用swift实现方法，很巧妙。</p>
<h4 id="jsx-一个语法点"><a href="#jsx-一个语法点" class="headerlink" title="jsx 一个语法点"></a>jsx 一个语法点</h4><p>下面写法，并不能把canGoBack的值传递下去，传下去的一直是true<br>({canGoBack})&#x3D;&gt; &lt;BackButton {…navigation} canGoBack&#x2F;&gt;<br>改成 ({canGoBack})&#x3D;&gt; &lt;BackButton {…navigation} canGoBack&#x3D;{canGoBack}&#x2F;&gt;</p>
<h4 id="info-plist-修改时报错了。读取文件错误"><a href="#info-plist-修改时报错了。读取文件错误" class="headerlink" title="info.plist 修改时报错了。读取文件错误"></a>info.plist 修改时报错了。读取文件错误</h4><p>原来是”${TARGET_BUILD_DIR}&#x2F;${INFOPLIST_PATH}” 在ipa里是压缩过的。<br><img src="/imgs/xcode_infoplist_encoding.webp" alt="webp"><br>还有就是xcode没有更新info.plist，原来字段还在导致脚本执行错误，需要增加exit 0</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">InfoplistPath=&quot;$&#123;TARGET_BUILD_DIR&#125;/$&#123;INFOPLIST_PATH&#125;&quot;</span><br><span class="line">if [ $&#123;CONFIGURATION&#125; == &quot;Debug&quot; ]; then</span><br><span class="line">    /usr/libexec/PlistBuddy -c &#x27;Add :NSLocalNetworkUsageDescription string &quot;Allow Flutter tools on your computer to connect and debug your application.... &quot;&#x27; &quot;$InfoplistPath&quot;</span><br><span class="line">    /usr/libexec/PlistBuddy -c &#x27;Add :NSBonjourServices array&#x27; &quot;$InfoplistPath&quot;</span><br><span class="line">    /usr/libexec/PlistBuddy -c &#x27;Add :NSBonjourServices:0 string &quot;_dartobservatory._tcp&quot;&#x27; &quot;$InfoplistPath&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>

<h4 id="flutter-代码没生效"><a href="#flutter-代码没生效" class="headerlink" title="flutter 代码没生效"></a>flutter 代码没生效</h4><p>flutter dart代码修改后，编译后新功能没有生效。 删掉原来的App.framework，再编译才生效。</p>
<h4 id="useEffect-调用控制-gt"><a href="#useEffect-调用控制-gt" class="headerlink" title="useEffect 调用控制-&gt;"></a>useEffect 调用控制<a target="_blank" rel="noopener" href="https://stackoverflow.com/a/62631254">-&gt;</a></h4><p>useEffect 调用了很多次，需要添加依赖，依赖变化了才会调用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 依赖为空，只调用一次</span><br><span class="line">useEffect(() =&gt; &#123;</span><br><span class="line">  fetchData();</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure>

<h3 id="不懂就问"><a href="#不懂就问" class="headerlink" title="不懂就问"></a>不懂就问</h3><h3 id="想啥写啥"><a href="#想啥写啥" class="headerlink" title="想啥写啥"></a>想啥写啥</h3><p>源码文件目录有一个空格，我猜测他们都不用terminal。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dengcqw.github.io/2022/08/02/work-daily-220802/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DengJinlong">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deng's Technique Blogs">
      <meta itemprop="description" content="我也有个写作的梦想，还有大把时间，努力实现吧。I also have a dream about writing. A mount of time in the feature, it's never too late.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Deng's Technique Blogs">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/08/02/work-daily-220802/" class="post-title-link" itemprop="url">work-daily-220802</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-08-02 09:23:25" itemprop="dateCreated datePublished" datetime="2022-08-02T09:23:25+08:00">2022-08-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-14 18:18:12" itemprop="dateModified" datetime="2022-08-14T18:18:12+08:00">2022-08-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/work/" itemprop="url" rel="index"><span itemprop="name">工作日记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="技术踩坑"><a href="#技术踩坑" class="headerlink" title="技术踩坑"></a>技术踩坑</h3><h4 id="遇到一个useState问题"><a href="#遇到一个useState问题" class="headerlink" title="遇到一个useState问题"></a>遇到一个useState问题</h4><p>const [imgUrls, setImgUrls] &#x3D; React.useState&lt;(string)[]&gt;([]);<br>报错(String or undefined)[] cannot assign to SetStateAction&lt;String[]&gt;<br>改成const [imgUrls, setImgUrls] &#x3D; React.useState&lt;(string | undefined)[]&gt;(urls);<br>所以 string[] 类型不包含空数组</p>
<h4 id="require导致的bug"><a href="#require导致的bug" class="headerlink" title="require导致的bug"></a>require导致的bug</h4><p>代码看起来没什么问题。lint都没报错。但是加载js出错。重启服务器也没用。<br><img src="/imgs/npm_resolve_module.webp" alt="webp"><br>把这个文件引用注释就可以了。说明还是这个文件的问题。<br>注释掉文件内一部分内容，正常了。看来是写的代码有问题。<br><img src="/imgs/npm_resolve_module_error_code.webp" alt="webp"><br>定位到这行代码。但是有什么问题呢？ source&#x3D;{require(‘’)} 使用了require导致的</p>
<h4 id="RNCSafeAreaProvider-没有找到"><a href="#RNCSafeAreaProvider-没有找到" class="headerlink" title="RNCSafeAreaProvider 没有找到"></a>RNCSafeAreaProvider 没有找到</h4><p><img src="/imgs/rn_native_code_SafeAreaProvider_not_found.webp" alt="webp"><br>RNCSafeAreaProvider 没有找到。编译时没有链接相关的库。重新编译一下，看着xcode日志，没发现问题<br>看一下Build Phases, 发现一个脚本，我之前写的，用来自动打包的静态库的命令。只是脚本没更新，我完全忘了。</p>
<h3 id="不懂就问"><a href="#不懂就问" class="headerlink" title="不懂就问"></a>不懂就问</h3><h4 id="封装array，获取n个元素"><a href="#封装array，获取n个元素" class="headerlink" title="封装array，获取n个元素"></a>封装array，获取n个元素</h4><p>ReactNative 每行显示两个或三个元素</p>
<blockquote>
<p>使用wrap并不好实现。一般是每行使用一个container，再用按列排列container。</p>
</blockquote>
<h5 id="如何每次获取2或3个元素呢？"><a href="#如何每次获取2或3个元素呢？" class="headerlink" title="如何每次获取2或3个元素呢？"></a>如何每次获取2或3个元素呢？</h5><p>let months &#x3D; [‘Jan’, ‘March’, ‘April’, ‘June’];<br>const two &#x3D; months.splice(0, 2)</p>
<h5 id="封装成iterator"><a href="#封装成iterator" class="headerlink" title="封装成iterator"></a>封装成iterator</h5><p>官方简单介绍<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Iterators_and_Generators">-&gt;</a>看了还是不懂，看代码 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function* gen(items) &#123;</span><br><span class="line">  let sub = items.splice(0, 2)</span><br><span class="line">    while(sub.length &gt; 0) &#123;</span><br><span class="line">       yield sub</span><br><span class="line">       sub = items.splice(0, 2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 使用</span><br><span class="line">let gg = gen([1,2,3,4,5,6,7,8,90])</span><br><span class="line">gg.next()</span><br><span class="line">// 还可以这样用</span><br><span class="line">for (let ele of gg) &#123; console.log(ele) &#125;</span><br><span class="line">// 这样不行(-&gt;)(https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...of#for...of与for...in的区别)</span><br><span class="line">for (let ele in gg) &#123; console.log(ele) &#125;</span><br><span class="line">// 没有map方法, 只有next方法: Uncaught TypeError: gg.map is not a function</span><br><span class="line">gg.map(x=&gt;x)</span><br></pre></td></tr></table></figure>

<h5 id="如何封装成map"><a href="#如何封装成map" class="headerlink" title="如何封装成map"></a>如何封装成map</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.mymap = function(callback) &#123;</span><br><span class="line">    const resultArray = [];</span><br><span class="line">    for (let index = 0; index &lt; this.length; index++) &#123;</span><br><span class="line">        resultArray.push(callback(this[index], index, this));</span><br><span class="line">    &#125;</span><br><span class="line">    return resultArray;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下面代码在nodejs 里运行正常， 在 react 里 this 是undefined<br>先改成函数式代 const group &#x3D; (array, count) &#x3D;&gt; callback &#x3D;&gt; {}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.group = (count)=&gt; (callback) =&gt; &#123;</span><br><span class="line">  function* gen(items) &#123;</span><br><span class="line">    let sub = items.splice(0, count)</span><br><span class="line">      while(sub.length &gt; 0) &#123;</span><br><span class="line">         yield sub</span><br><span class="line">         sub = items.splice(0, count)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const items = []</span><br><span class="line">  for (const item of this) &#123; // 这里要用for-of</span><br><span class="line">    items.push(item)</span><br><span class="line">  &#125;</span><br><span class="line">  const resultArray = [];</span><br><span class="line">  const gg = gen(items)</span><br><span class="line">  for (const sub of gg) &#123;</span><br><span class="line">      resultArray.push(callback(sub));</span><br><span class="line">  &#125;</span><br><span class="line">  return resultArray;</span><br><span class="line">&#125;</span><br><span class="line">// usage</span><br><span class="line">arr.group(2)(x=&gt;x)</span><br></pre></td></tr></table></figure>

<h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><p>有必要加入ladash or rxjs 吗?</p>
<blockquote>
<p>除了前面场景，还没有遇到更复杂的使用场景，用基本js就能解决。<br>对包体积影响大不大，是不是没使用到的功能不会导入包中</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://axios-http.com/docs/cancellation">axios</a> 是可以垮web，nodejs, <a target="_blank" rel="noopener" href="https://www.react-native.cn/docs/network#%E4%BD%BF%E7%94%A8%E5%85%B6%E4%BB%96%E7%9A%84%E7%BD%91%E7%BB%9C%E5%BA%93">react native</a> 的网络库</p>
<blockquote>
<p>难怪下载量巨大</p>
</blockquote>
<p>array 怎么删除元素</p>
<blockquote>
<p>根据索引和方法<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/splice">splice</a><br>元素内容 使用indexOf获取索引</p>
</blockquote>
<p>RecyclerListView 怎么处理变高的view</p>
<blockquote>
<p>forceNonDeterministicRendering&#x3D;{true}</p>
</blockquote>
<p>学习ts的网站 <a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/jsx.html">-&gt;</a></p>
<h3 id="想啥写啥"><a href="#想啥写啥" class="headerlink" title="想啥写啥"></a>想啥写啥</h3><p>一周要做一个需求，三个主要页面，几个弹框，几个接口，和一堆逻辑。<br>一边开发一边封装组件。还有接口基本信息要从app传入。<br>快捷方式是考虑使用UserDefault传递token。项目里使用了MMVK，也可以使用。<br>收入给的不多。事情不少。<br>其实都是重复的工作，需要做好技术沉淀。慢慢会越来越轻松。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dengcqw.github.io/2022/08/01/work-daily-220801/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DengJinlong">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deng's Technique Blogs">
      <meta itemprop="description" content="我也有个写作的梦想，还有大把时间，努力实现吧。I also have a dream about writing. A mount of time in the feature, it's never too late.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Deng's Technique Blogs">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/08/01/work-daily-220801/" class="post-title-link" itemprop="url">work-daily-220801</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-08-01 09:01:13" itemprop="dateCreated datePublished" datetime="2022-08-01T09:01:13+08:00">2022-08-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-14 18:18:12" itemprop="dateModified" datetime="2022-08-14T18:18:12+08:00">2022-08-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/work/" itemprop="url" rel="index"><span itemprop="name">工作日记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="技术踩坑"><a href="#技术踩坑" class="headerlink" title="技术踩坑"></a>技术踩坑</h3><h4 id="ScrollViewContainer-组件"><a href="#ScrollViewContainer-组件" class="headerlink" title="ScrollViewContainer 组件"></a>ScrollViewContainer 组件</h4><p>我喜欢下面这种风格，我仿造这种风格封装一个scrollview, 可以设置top 和bottom 组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Stack.Navigator&gt;</span><br><span class="line">  &lt;Stack.Screen/&gt;</span><br><span class="line">&lt;/Stack.Navigator&gt;</span><br></pre></td></tr></table></figure>
<p>我参考了开源代码，发现子类型其实用来配置内部view的，不是正真的view。<br>我这里也只是要提取出children，放在ScrollView之外。<br>遇到的难题是，类型判断。如何判断child是FixedBottom组件？<br>理论上无法直接判断，js其实都是对象。我想到的办法是使用defaultProps。<br>这样就可以在props中判断是不是我定义的组件。<br>详细代码参考<a target="_blank" rel="noopener" href="https://gist.github.com/dengcqw/a998228ea6f11c64da9cdd5cf20879c5">gist</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;JTContainer&gt;</span><br><span class="line">  &lt;JTContainer.FixedBottom&gt;</span><br><span class="line">    &lt;BottomBar /&gt;</span><br><span class="line">  &lt;/JTContainer.FixedBottom&gt;</span><br><span class="line">&lt;/JTContainer&gt;</span><br></pre></td></tr></table></figure>

<h4 id="公共组件管理问题"><a href="#公共组件管理问题" class="headerlink" title="公共组件管理问题"></a>公共组件管理问题</h4><p>我新建了一个npm库用来放公共组件。现在问题是组件区分默认导出和非默认导出。想要做到像RN一样导入组件。暂时考虑加强规范。<br>一种方式只默认导出，其他组件导出拆分成独立文件。<br>另一种只非默认导出 使用import * as语法</p>
<h3 id="不懂就问"><a href="#不懂就问" class="headerlink" title="不懂就问"></a>不懂就问</h3><h3 id="想啥写啥"><a href="#想啥写啥" class="headerlink" title="想啥写啥"></a>想啥写啥</h3><p>上周末，同事们又加班两天，新app总于正式上线了。可能是我们的总监(其实是CEO, 感觉没有总监)，在老板群里了发一段话，一是宣布，二是感谢，三是鼓励团队。<br>但是其中有一句话，我听着怪怪的：团队可能或有不足，有奋斗的精神在，就什么都不怕。<br>我觉得应该改成：困难再大，有奋斗的精神在，也什么都不怕。</p>
<p>我说今天优化下项目。领导直摇头。<br>领导听说我没有需求，立刻给了我一个需求。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">DengJinlong</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
